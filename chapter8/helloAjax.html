<html>
<head>
  <meta http-equiv="content-type" content="text/html"; charset="utf-8" />
  <title>chapter7</title>
  <script type="text/javascript">
  <!--
  function getXHR() {
    var req;
    try{
      req = new XMLHttpRequest();
    }catch(e){
      try {
        req = new ActiveXObject('Msxml12.XMLHTTP');
      }catch(e){
        req = new ActiveXObject('Microsotft.XMLHTTP');
      }
    }
    return req;
  }

  function asyncSend() {
    var req = getXHR();
    req.onreadystatechange = function(){
      var result = document.getElementById('result');
      if(req.readyState == 4){
        if(req.status == 200){
          result.innerHTML = req.responseText;
        }else{
          result.innerHTML = "サーバーエラーが発生しました。";
        }
      }else{
        result.innerHTML = "通信中...";
      }
    }
    req.open('GET', 'helloAjax.php?name='+encodeURIComponent(document.fm.name.value), true);
    req.send(null);
  }
  //-->
  </script>
</head>
<body>
  <form name="fm">
  <label>名前：
  <input type="text" name="name" size="15" /></label>
  <input type="button" name="submit" value="送信" onclick="asyncSend()" />
  </form>
  <div id="result"></div>
</body>
</html>
